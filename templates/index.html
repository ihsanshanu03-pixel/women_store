{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<style>
  /* ---------- HEADER ---------- */
  .page-header h1 {
    font-size: 46px;
    font-weight: 800;
    letter-spacing: -1px;
  }

  .page-header h1 span {
    font-size: 16px;
    font-weight: normal;
    margin-left: 5px;
  }

  .page-header h2 {
    margin-top: 10px;
    font-size: 18px;
    letter-spacing: 3px;
    font-weight: 500;
  }

  /* ---------- CATEGORY STRIP ---------- */
  .category-strip {
    display: flex;
    gap: 22px;
    margin-top: 45px;
    overflow-x: auto;
    padding-bottom: 10px;
  }

  .category-strip::-webkit-scrollbar {
    display: none;
  }

  .category-card {
    min-width: 250px;
    cursor: pointer;
  }

  .category-card img {
    width: 100%;
    height: 170px;
    object-fit: cover;
    display: block;
  }

  .category-card p {
    margin-top: 12px;
    font-size: 14px;
    font-weight: 700;
    letter-spacing: 2px;
  }

  .category-card.active {
    background: #000;
    padding: 10px;
  }

  .category-card.active p {
    color: #fff;
  }

  /* ---------- PRODUCTS GRID ---------- */
  .products {
    margin-top: 60px;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 25px;
  }

  .product-card img {
    width: 100%;
    height: 280px;
    object-fit: cover;
  }

  .product-card h4 {
    margin-top: 10px;
    font-size: 14px;
    font-weight: 600;
  }

  .product-card p {
    margin-top: 5px;
    font-weight: bold;
  }
</style>
{% endblock %}

{% block content %}
<!-- BREADCRUMB -->
<div class="breadcrumb">
  <a href="{% url 'home' %}">Home</a> / <span>Women Clothing</span>
</div>

<!-- HEADER -->
<div class="page-header">
  <h1><span style="color: rgb(255, 157, 173);font-size: 50px; font-weight: 700;">WOMEN</span> CLOTHING <span
      id="count">[{{ products.count }}]</span></h1>
  <h2>COLLECTION</h2>
</div>

<!-- CATEGORY STRIP -->
<div class="category-strip" id="categoryStrip">
  <!-- 'All' category option could be added here -->
  <a href="{% url 'home' %}" class="category-card {% if not active_category_id %}active{% endif %}"
    style="text-decoration:none; color:inherit;">
    <div style="height:170px; background:#eee; display:flex; align-items:center; justify-content:center;">ALL</div>
    <p>ALL</p>
  </a>

  {% for category in categories %}
  <a href="?category={{ category.id }}"
    class="category-card {% if active_category_id == category.id %}active{% endif %}"
    style="text-decoration:none; color:inherit;">
    {% if category.image %}
    <img src="{{ category.image.url }}" alt="{{ category.name }}">
    {% else %}
    <div style="height:170px; background:#eee;"></div>
    {% endif %}
    <p>{{ category.name|upper }}</p>
  </a>
  {% endfor %}
</div>

<!-- PRODUCTS -->
<div class="products" id="products">
  {% for product in products %}
  <a href="{% url 'product_detail' product.id %}" class="product-card" style="text-decoration:none; color:inherit;">
    {% if product.image %}
    <img src="{{ product.image.url }}" alt="{{ product.name }}">
    {% else %}
    <div style="width:100%; height:280px; background:#eee;"></div>
    {% endif %}
    <h4>{{ product.name }}</h4>
    <p>â‚¹{{ product.price }}</p>
  </a>
  {% empty %}
  <p>No products found.</p>
  {% endfor %}
</div>
{% endblock %}